{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport * as Animatable from 'react-native-animatable';\nimport { useNavigation } from '@react-navigation/native';\nimport { AuthContext } from \"../../../contexts/auth\";\nimport { db } from \"../../../BancoNoSql/conexaoFirebase\";\nimport { ref, set, onValue } from 'firebase/database';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function InserirAluno(_ref) {\n  var route = _ref.route;\n  var cont = 0;\n  var navigation = useNavigation();\n\n  var _useContext = useContext(AuthContext),\n      user = _useContext.user,\n      nomeGBavaliar = _useContext.nomeGBavaliar;\n\n  var _useState = useState(user.userId + '/'),\n      _useState2 = _slicedToArray(_useState, 2),\n      userId = _useState2[0],\n      setUserId = _useState2[1];\n\n  var _useState3 = useState(nomeGBavaliar + '/'),\n      _useState4 = _slicedToArray(_useState3, 2),\n      nomeGrupo = _useState4[0],\n      setNomeGrupo = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      contador = _useState6[0],\n      setContador = _useState6[1];\n\n  var _useState7 = useState('aluno'),\n      _useState8 = _slicedToArray(_useState7, 2),\n      aluno = _useState8[0],\n      setAluno = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      nome = _useState10[0],\n      setNome = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      idade = _useState12[0],\n      setIdade = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      nomeRecebido = _useState14[0],\n      setNomeRecebido = _useState14[1];\n\n  var dd = [];\n  useEffect(function () {\n    FlatRefresh();\n  }, []);\n\n  function FlatRefresh() {\n    var myDoc = ref(db, userId + nomeGrupo);\n    onValue(myDoc, function (snapshot) {\n      var data = snapshot.val();\n      var lt = [];\n      lt.push(data);\n      dd = lt.map(function (obj) {\n        return Object.keys(obj).map(function (key) {\n          return obj[key];\n        });\n      });\n      var b = dd[0].map(function (item) {\n        return item;\n      });\n      var cont = b.length;\n      setNomeRecebido(b);\n      setContador(cont);\n    });\n  }\n\n  function setarAlunoEmGrupo() {\n    setContador(contador + 1);\n    console.log(\"contador: \" + contador);\n    cont = contador;\n    var alunoVal = aluno + cont + '/';\n    console.log(alunoVal);\n    set(ref(db, userId + nomeGrupo + alunoVal), {\n      nome: nome,\n      idade: idade,\n      alunoReferencia: alunoVal,\n      avaliado: false\n    }).then(function () {\n      alert(\"deu certo!\");\n      FlatRefresh();\n    }).catch(function (error) {\n      alert(error.message);\n      alert(\"falhou\");\n    });\n  }\n\n  function setarNomeDeGrupos() {\n    var nomeGp = nomeGBavaliar;\n    set(ref(db, userId + \"nomesDeGrupos/\" + nomeGrupo), {\n      nomeg: nomeGp\n    }).then(function () {\n      alert(\"Enviou nome do grupo corretamente!\");\n      navigation.navigate('PainelControle');\n    }).catch(function (error) {\n      alert(error.message);\n      alert(\"falhou envio do nome do grupo\");\n    });\n  }\n\n  var Read = function Read() {\n    var myDoc = ref(db, userId + nomeGrupo);\n    onValue(myDoc, function (snapshot) {\n      var data = snapshot.val();\n      setNomeRecebido(data.nome);\n      var valor = data;\n      var al = 'aluno0/';\n      console.log(\"estado: \" + nomeRecebido);\n      console.log(\"let: \" + valor.aluno0.nome);\n    });\n  };\n\n  function deletarAluno(alunoCur) {\n    Alert.alert(\"Confirmação\", \"Deseja excluir o aluno \" + alunoCur + \" ?\", [{\n      text: \"Sim\",\n      onPress: function onPress() {\n        return console.log(\"implementar Delete\");\n      }\n    }, {\n      text: \"Não\"\n    }]);\n  }\n\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Animatable.View, {\n      animation: \"fadeInLeft\",\n      style: styles.viewTitle,\n      children: _jsx(Text, {\n        style: styles.title,\n        children: \"Criar Grupo\"\n      })\n    }), _jsx(View, {\n      style: styles.viewInput,\n      children: _jsx(TextInput, {\n        placeholder: \"Digite o nome do Aluno\",\n        style: styles.input,\n        value: nome,\n        onChangeText: function onChangeText(value) {\n          return setNome(value);\n        }\n      })\n    }), _jsxs(View, {\n      style: styles.viewInput2,\n      children: [_jsx(TextInput, {\n        placeholder: \"Idade\",\n        style: styles.input2,\n        value: idade,\n        onChangeText: function onChangeText(value) {\n          return setIdade(value);\n        }\n      }), _jsx(TouchableOpacity, {\n        style: styles.btnAdd,\n        onPress: function onPress() {\n          return setarAlunoEmGrupo();\n        },\n        children: _jsx(Text, {\n          style: styles.btnAddTxt,\n          children: \"Adicionar\"\n        })\n      })]\n    }), _jsx(Text, {\n      style: styles.alunosCad,\n      children: \"Alunos Cadastrados\"\n    }), _jsx(Animatable.View, {\n      animation: \"zoomIn\",\n      style: styles.viewRodape,\n      children: _jsxs(View, {\n        children: [_jsxs(View, {\n          style: {\n            flexDirection: 'row'\n          },\n          children: [_jsx(Text, {\n            style: styles.flatStyle,\n            children: \"Nome\"\n          }), _jsx(Text, {\n            style: styles.flatStyle1,\n            children: \"Idade\"\n          })]\n        }), _jsx(FlatList, {\n          data: nomeRecebido,\n          renderItem: function renderItem(_ref2) {\n            var item = _ref2.item;\n            return _jsxs(View, {\n              style: styles.viewFlat,\n              children: [_jsx(TouchableOpacity, {\n                style: styles.btnFlatNome,\n                onPress: function onPress() {\n                  return deletarAluno(item.nome);\n                },\n                children: _jsx(Text, {\n                  style: styles.txtFlat,\n                  children: item.nome\n                })\n              }), _jsx(Text, {\n                style: styles.txtFlat1,\n                children: item.idade\n              })]\n            });\n          },\n          keyExtractor: function keyExtractor(item) {\n            return item.nome;\n          }\n        })]\n      })\n    }), _jsx(Animatable.View, {\n      animation: \"lightSpeedIn\",\n      style: styles.viewBtnFinalizar,\n      children: _jsx(TouchableOpacity, {\n        style: styles.btnFinalizar,\n        onPress: function onPress() {\n          return setarNomeDeGrupos();\n        },\n        children: _jsx(Text, {\n          style: styles.btnFinalizarTxt,\n          children: \"Finalizar\"\n        })\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#38a69d'\n  },\n  viewInput: {\n    marginTop: '-20%',\n    alignItems: 'center'\n  },\n  viewInput2: {\n    marginLeft: '13%',\n    marginTop: 10,\n    flexDirection: 'row'\n  },\n  input: {\n    borderBottomWidth: 1,\n    borderBottomColor: '#fff',\n    width: '75%',\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  input2: {\n    borderBottomWidth: 1,\n    borderBottomColor: '#fff',\n    width: '20%',\n    marginBottom: 5,\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  btnAdd: {\n    backgroundColor: '#fff',\n    width: '50%',\n    height: 40,\n    borderRadius: 10,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginLeft: 50,\n    marginTop: 10\n  },\n  btnAddTxt: {\n    fontSize: 18,\n    color: '#38a69d',\n    fontWeight: 'bold'\n  },\n  viewTitle: {\n    flex: 1,\n    marginTop: '10%',\n    alignItems: 'center'\n  },\n  title: {\n    fontSize: 28,\n    fontWeight: 'bold',\n    color: '#fff'\n  },\n  viewRodape: {\n    flex: 2,\n    backgroundColor: '#fff',\n    borderRadius: 10,\n    margin: '5%'\n  },\n  viewBtnFinalizar: {\n    marginTop: 5,\n    marginBottom: '10%',\n    alignItems: 'center'\n  },\n  btnFinalizar: {\n    backgroundColor: '#fff',\n    width: '75%',\n    height: 40,\n    borderRadius: 10,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  btnFinalizarTxt: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#38a69d'\n  },\n  alunosCad: {\n    textAlign: 'center',\n    marginTop: '5%',\n    marginBottom: -15,\n    fontSize: 16,\n    color: '#fff',\n    fontWeight: 'bold'\n  },\n  flatStyle: {\n    marginLeft: \"3%\",\n    fontSize: 18,\n    fontWeight: 'bold',\n    borderBottomWidth: 1,\n    width: '70%'\n  },\n  flatStyle1: {\n    marginLeft: \"3%\",\n    fontSize: 18,\n    fontWeight: 'bold',\n    width: \"20%\",\n    borderBottomWidth: 1\n  },\n  viewFlat: {\n    flexDirection: 'row',\n    justifyContent: 'space-between'\n  },\n  txtFlat: {\n    marginLeft: '3%',\n    marginTop: 5,\n    fontSize: 16\n  },\n  txtFlat1: {\n    marginRight: '14%',\n    marginTop: 5,\n    fontSize: 17,\n    fontWeight: 'bold'\n  },\n  btnFlatNome: {\n    marginLeft: '3%'\n  }\n});","map":{"version":3,"sources":["C:/Users/Usuário/Documents/megak/TCCreact-native/DiscalculiaHelper/src/pages/Aluno/InserirAluno/index.js"],"names":["React","useContext","useState","useEffect","Animatable","useNavigation","AuthContext","db","ref","set","onValue","InserirAluno","route","cont","navigation","user","nomeGBavaliar","userId","setUserId","nomeGrupo","setNomeGrupo","contador","setContador","aluno","setAluno","nome","setNome","idade","setIdade","nomeRecebido","setNomeRecebido","dd","FlatRefresh","myDoc","snapshot","data","val","lt","push","map","obj","Object","keys","key","b","item","length","setarAlunoEmGrupo","console","log","alunoVal","alunoReferencia","avaliado","then","alert","catch","error","message","setarNomeDeGrupos","nomeGp","nomeg","navigate","Read","valor","al","aluno0","deletarAluno","alunoCur","Alert","text","onPress","styles","container","viewTitle","title","viewInput","input","value","viewInput2","input2","btnAdd","btnAddTxt","alunosCad","viewRodape","flexDirection","flatStyle","flatStyle1","viewFlat","btnFlatNome","txtFlat","txtFlat1","viewBtnFinalizar","btnFinalizar","btnFinalizarTxt","StyleSheet","create","flex","backgroundColor","marginTop","alignItems","marginLeft","borderBottomWidth","borderBottomColor","width","color","fontSize","fontWeight","marginBottom","height","borderRadius","justifyContent","margin","textAlign","marginRight"],"mappings":"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","sourcesContent":["import React,{useContext,useState,useEffect} from 'react';\r\nimport { View, Text, StyleSheet,TextInput, TouchableOpacity, FlatList, Alert } from 'react-native';\r\n\r\nimport * as Animatable from 'react-native-animatable';\r\n\r\nimport { useNavigation } from '@react-navigation/native';\r\n\r\nimport { AuthContext } from '../../../contexts/auth'\r\n\r\nimport { db } from '../../../BancoNoSql/conexaoFirebase';\r\nimport { ref, set, onValue } from 'firebase/database';\r\n\r\nexport default function InserirAluno({route}) {\r\n    var cont =0;\r\n    const navigation = useNavigation();\r\n    const { user,nomeGBavaliar } = useContext(AuthContext);\r\n\r\n    const [userId, setUserId]=useState(user.userId+'/');\r\n\r\n    const [nomeGrupo, setNomeGrupo] = useState(nomeGBavaliar+'/');\r\n\r\n    const [contador,setContador] = useState(0);\r\n    const [aluno,setAluno] = useState('aluno');\r\n\r\n    const [nome,setNome] = useState('');\r\n    const [idade,setIdade] = useState('');\r\n\r\n    const [nomeRecebido, setNomeRecebido]=useState([]);\r\n   var dd =[];\r\n\r\n   useEffect(() => {\r\n      FlatRefresh();\r\n   },[]);\r\n\r\n       function FlatRefresh(){ //atualiza o array do flatlist \"grupos\"\r\n        const myDoc = ref(db,userId + nomeGrupo );\r\n  \r\n        onValue(myDoc, (snapshot) => {\r\n            \r\n            const data = snapshot.val();\r\n            let lt = [];\r\n          \r\n            lt.push(data);\r\n            \r\n             dd = lt.map(function(obj){\r\n              return Object.keys(obj).map(function(key) { //converte em array\r\n    \r\n                return obj[key];\r\n              })\r\n            })\r\n        \r\n    \r\n              let b = dd[0].map((item) => {\r\n                return item;\r\n              })\r\n\r\n              let cont = b.length;\r\n              setNomeRecebido(b);//array do flat list\r\n              setContador(cont);\r\n              //console.log(\"b: \",b);\r\n            \r\n            \r\n        })\r\n       }\r\n\r\n\r\n    function setarAlunoEmGrupo(){\r\n        setContador(contador+1);\r\n        console.log(\"contador: \"+contador);\r\n        cont = contador;\r\n        let alunoVal = (aluno+cont+'/');\r\n        console.log(alunoVal);\r\n        set(ref(db, userId + nomeGrupo + alunoVal ), {\r\n            nome: nome,\r\n            idade: idade,\r\n            alunoReferencia: alunoVal,\r\n            avaliado:false\r\n\r\n        }).then(() => {\r\n            alert(\"deu certo!\")\r\n            FlatRefresh();\r\n            })\r\n          .catch((error) => {\r\n            alert(error.message)\r\n            alert(\"falhou\");\r\n            })\r\n\r\n            \r\n    }\r\n\r\n    function setarNomeDeGrupos(){\r\n        \r\n        let nomeGp = nomeGBavaliar;\r\n        set(ref(db, userId + \"nomesDeGrupos/\" + nomeGrupo  ), {\r\n            nomeg: nomeGp,\r\n            \r\n\r\n        }).then(() => {\r\n            alert(\"Enviou nome do grupo corretamente!\")\r\n            navigation.navigate('PainelControle');\r\n            })\r\n          .catch((error) => {\r\n            alert(error.message)\r\n            alert(\"falhou envio do nome do grupo\");\r\n            })\r\n    }\r\n\r\n    const Read = () => {\r\n        const myDoc = ref(db,userId + nomeGrupo);\r\n        \r\n\r\n        onValue(myDoc, (snapshot) => {\r\n            const data = snapshot.val();\r\n   \r\n            setNomeRecebido(data.nome);\r\n            let valor = data;\r\n            let al ='aluno0/'\r\n            console.log(\"estado: \"+nomeRecebido);\r\n            console.log(\"let: \"+valor.aluno0.nome);\r\n        })\r\n    \r\n    }\r\n\r\n    function deletarAluno(alunoCur){\r\n        Alert.alert(\"Confirmação\", \"Deseja excluir o aluno \"+alunoCur+\" ?\",[\r\n            {\r\n                text: \"Sim\",\r\n                onPress: () => console.log(\"implementar Delete\"),\r\n            },\r\n            {\r\n                text: \"Não\",\r\n                \r\n            }\r\n        ])\r\n    }\r\n\r\n return (\r\n   <View style={styles.container}>\r\n       < Animatable.View animation=\"fadeInLeft\"  style={styles.viewTitle}>\r\n           <Text style={styles.title}>Criar Grupo</Text>\r\n       </Animatable.View>\r\n\r\n       <View style={styles.viewInput}>\r\n           <TextInput\r\n           placeholder='Digite o nome do Aluno'\r\n           style={styles.input}\r\n           value={nome}\r\n           onChangeText={(value) => setNome(value)}\r\n           />\r\n\r\n       </View>\r\n       <View style={styles.viewInput2}>\r\n            <TextInput\r\n                placeholder='Idade'\r\n                style={styles.input2}\r\n                value={idade}\r\n                onChangeText={(value) => setIdade(value)}\r\n                />\r\n\r\n            <TouchableOpacity style={styles.btnAdd}\r\n             onPress={() => setarAlunoEmGrupo()}\r\n            >\r\n                <Text style={styles.btnAddTxt}>Adicionar</Text>\r\n            </TouchableOpacity>\r\n       </View>\r\n\r\n       <Text style={styles.alunosCad}>Alunos Cadastrados</Text>\r\n        \r\n       < Animatable.View animation=\"zoomIn\" style={styles.viewRodape}>\r\n         <View>{/*é preciso otimizar esse flatlist*/}\r\n             <View style={{flexDirection:'row'}}>\r\n             <Text style={styles.flatStyle }>Nome</Text>\r\n             <Text style={styles.flatStyle1}>Idade</Text>\r\n             </View>\r\n             <FlatList\r\n                data={nomeRecebido}\r\n                renderItem={ ({item}) => \r\n                            <View style={styles.viewFlat}>\r\n                                <TouchableOpacity style={styles.btnFlatNome} onPress={() => deletarAluno(item.nome)}>\r\n                                  <Text style={styles.txtFlat}>{item.nome}</Text>\r\n                                </TouchableOpacity>\r\n                                <Text style={styles.txtFlat1}>{item.idade}</Text>\r\n                            </View>\r\n                            }\r\n                keyExtractor={(item) => item.nome}\r\n             />\r\n     \r\n         </View>\r\n        \r\n       </Animatable.View>\r\n\r\n       <Animatable.View animation=\"lightSpeedIn\" style={styles.viewBtnFinalizar}>\r\n             <TouchableOpacity style={styles.btnFinalizar} onPress={() => setarNomeDeGrupos()}>\r\n                 <Text style={styles.btnFinalizarTxt}>Finalizar</Text>\r\n             </TouchableOpacity>\r\n         </Animatable.View>\r\n        \r\n\r\n   </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container:{\r\n     flex:1,\r\n     backgroundColor:'#38a69d',\r\n    },\r\n    viewInput:{\r\n        marginTop:'-20%',\r\n        alignItems:'center',\r\n    },\r\n    viewInput2:{\r\n        \r\n        marginLeft:'13%',\r\n        marginTop:10,\r\n        flexDirection:'row'\r\n    },\r\n    input:{\r\n        borderBottomWidth:1,\r\n        borderBottomColor:'#fff',\r\n        width:'75%',\r\n        color:'#fff',\r\n        fontSize:16,\r\n        fontWeight:'bold'\r\n    },\r\n    input2:{\r\n        borderBottomWidth:1,\r\n        borderBottomColor:'#fff',\r\n        width:'20%' ,\r\n        marginBottom:5,\r\n        color:'#fff',\r\n        fontSize:16,\r\n        fontWeight:'bold'\r\n    },\r\n    btnAdd:{\r\n        backgroundColor:'#fff',\r\n        width:'50%',\r\n        height: 40,\r\n        borderRadius:10,\r\n        alignItems:'center',\r\n        justifyContent:'center',\r\n        marginLeft:50,\r\n        marginTop:10\r\n    },\r\n    btnAddTxt:{\r\n        fontSize:18,\r\n        color:'#38a69d',\r\n        fontWeight:'bold'\r\n    },\r\n    viewTitle:{\r\n        flex:1,\r\n        marginTop:'10%',\r\n        alignItems:'center'\r\n       \r\n    },\r\n    title:{\r\n        fontSize:28,\r\n        fontWeight:'bold',\r\n        color:'#fff'\r\n    },\r\n    viewRodape:{\r\n        flex:2,\r\n        backgroundColor:'#fff',\r\n        borderRadius:10,\r\n        margin:'5%'\r\n    },\r\n    viewBtnFinalizar:{\r\n        marginTop:5,\r\n        marginBottom:'10%',\r\n        alignItems:'center'\r\n    },\r\n    btnFinalizar:{\r\n        backgroundColor:'#fff',\r\n        width:'75%',\r\n        height:40,\r\n        borderRadius:10,\r\n        alignItems:'center',\r\n        justifyContent:'center'\r\n    },\r\n    btnFinalizarTxt:{\r\n        fontSize:18,\r\n        fontWeight:'bold',\r\n        color:'#38a69d'\r\n    },\r\n    alunosCad:{\r\n        textAlign:'center',\r\n        marginTop:'5%',\r\n        marginBottom:-15,\r\n        fontSize:16,\r\n        color:'#fff',\r\n        fontWeight:'bold'\r\n    },\r\n    flatStyle:{\r\n        marginLeft:\"3%\", \r\n        fontSize:18, \r\n        fontWeight:'bold',\r\n        borderBottomWidth:1,\r\n        width: '70%'\r\n    },\r\n    flatStyle1:{\r\n        marginLeft:\"3%\", \r\n        fontSize:18, \r\n        fontWeight:'bold',\r\n        width:\"20%\",\r\n        borderBottomWidth:1\r\n    },\r\n    viewFlat:{\r\n        flexDirection:'row', \r\n        justifyContent:'space-between'\r\n    },\r\n    txtFlat:{\r\n        marginLeft:'3%',\r\n        marginTop:5, \r\n        fontSize: 16\r\n    },\r\n    txtFlat1:{\r\n        marginRight:'14%',\r\n        marginTop:5, \r\n        fontSize: 17, \r\n        fontWeight:'bold'\r\n    },\r\n    btnFlatNome:{\r\n        marginLeft:'3%'\r\n    }\r\n})"]},"metadata":{},"sourceType":"module"}